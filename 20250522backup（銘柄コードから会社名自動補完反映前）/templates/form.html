<!-- templates/form.html -->

{% extends "layout.html" %}
{% block title %}æŠ•è³‡è¨˜éŒ²ã®å…¥åŠ›{% endblock %}
{% block content %}


<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚³ã‚³ãƒˆã‚· - æŠ•è³‡è¨˜éŒ²</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

{% if error_msg %}
  <div class="error-msg" style="color:red; font-weight:bold;">{{ error_msg }}</div>
{% endif %}



<body>
  <h2>ğŸ“ æŠ•è³‡è¨˜éŒ²ã®å…¥åŠ›</h2>
  <form method="POST">


    <label>ç¨®åˆ¥ï¼š
      <select name="type">
        <option value="buy">è²·ã„</option>
        <option value="sell">å£²ã‚Š</option>
        <option value="watch">ã‚¦ã‚©ãƒƒãƒ</option>
      </select>
    </label>



    <label>éŠ˜æŸ„åï¼š<input type="text" name="stock" required></label>
    <div>


    <label>éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ï¼ˆ4æ¡ or ãƒ†ã‚£ãƒƒã‚«ãƒ¼ï¼‰ï¼š<input type="text" name="code" required></label>
    </div>


    <label>æ ªä¾¡ï¼ˆå††ï¼‰ï¼š<input type="text" name="price" required></label>

    <label>æ•°é‡ï¼š<input type="text" name="quantity" value="100" required></label>

    <label>å–å¼•é¡ï¼ˆå††ï¼‰
    <input type="text"  name="total" id="total" value="{{ trade.total if trade else '' }}" readonly style="background:#eee; color:#888;">
    </label>

    <label>æ—¥ä»˜ï¼š
    <input type="date" name="date" id="date">
    </label>

    <label>æ„Ÿæƒ…ï¼š</label>
<div class="feeling-options">
  <label class="feeling-1">
    <input type="radio" name="feeling" value="1" class="feeling-radio">
    <span class="feeling-icon">ğŸ˜–</span>
    <span class="feeling-label">ãƒã‚¬ãƒ†ã‚£ãƒ–</span>
  </label>
  <label class="feeling-2">
    <input type="radio" name="feeling" value="2" class="feeling-radio">
    <span class="feeling-icon">ğŸ˜</span>
    <span class="feeling-label">ã‚„ã‚„ä¸å®‰</span>
  </label>
  <label class="feeling-3">
    <input type="radio" name="feeling" value="3" class="feeling-radio">
    <span class="feeling-icon">ğŸ˜</span>
    <span class="feeling-label">ãµã¤ã†</span>
  </label>
  <label class="feeling-4">
    <input type="radio" name="feeling" value="4" class="feeling-radio">
    <span class="feeling-icon">ğŸ™‚</span>
    <span class="feeling-label">ã¾ã‚ã¾ã‚</span>
  </label>
  <label class="feeling-5">
    <input type="radio" name="feeling" value="5" class="feeling-radio">
    <span class="feeling-icon">ğŸ˜„</span>
    <span class="feeling-label">ãƒãƒƒãƒ”ãƒ¼</span>
  </label>
</div>
   

<label>æŠ•è³‡ç›®çš„ï¼š</label>
<div class="purpose-options">
  <label>
    <input type="radio" class="purpose-radio" name="purpose" value="çŸ­æœŸ">
    <span class="purpose-icon">ğŸ’¹</span>
    <span class="purpose-label">çŸ­æœŸ</span>
  </label>
  <label>
    <input type="radio" class="purpose-radio" name="purpose" value="ä¸­æœŸ">
    <span class="purpose-icon">ğŸ“Š</span>
    <span class="purpose-label">ä¸­æœŸ</span>
  </label>
  <label>
    <input type="radio" class="purpose-radio" name="purpose" value="é•·æœŸ">
    <span class="purpose-icon">ğŸ“ˆ</span>
    <span class="purpose-label">é•·æœŸ</span>
  </label>
  <label>
    <input type="radio" class="purpose-radio" name="purpose" value="å„ªå¾…">
    <span class="purpose-icon">ğŸ</span>
    <span class="purpose-label">å„ªå¾…</span>
  </label>
  <label>
    <input type="radio" class="purpose-radio" name="purpose" value="é…å½“">
    <span class="purpose-icon">ğŸ’°</span>
    <span class="purpose-label">é…å½“</span>
  </label>
</div>


    <label>ãƒ¡ãƒ¢ï¼š<textarea name="memo" rows="3"></textarea></label>
    <button class="btn" type="submit">ä¿å­˜ã™ã‚‹</button>
  </form>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const priceInput = document.querySelector('input[name="price"]');
    const quantityInput = document.querySelector('input[name="quantity"]');
    const totalInput = document.querySelector('input[name="total"]');
    const dateInput = document.querySelector('input[name="date"]');

    // åˆè¨ˆé‡‘é¡ï¼ˆã‚«ãƒ³ãƒä»˜ï¼‰è‡ªå‹•è¨ˆç®—
    function updateTotal() {
      const price = parseFloat(priceInput.value.replace(/,/g, "")) || 0;
      const quantity = parseInt(quantityInput.value.replace(/,/g, "")) || 0;
      const total = price * quantity;
      totalInput.value = total ? Math.round(total).toLocaleString() : "";
    }

    priceInput.addEventListener("input", updateTotal);
    quantityInput.addEventListener("input", updateTotal);

    // ãƒ•ã‚©ãƒ¼ãƒ åˆæœŸè¡¨ç¤ºæ™‚ã‚‚åˆè¨ˆé‡‘é¡ã‚’è¡¨ç¤º
    updateTotal();

    // ä»Šæ—¥ã®æ—¥ä»˜ã‚’è‡ªå‹•ã‚»ãƒƒãƒˆï¼ˆæœªå…¥åŠ›æ™‚ã®ã¿ï¼‰
    if (dateInput && !dateInput.value) {
      const today = new Date().toISOString().split("T")[0];
      dateInput.value = today;
    }
  });
</script>








</body>
</html>


{% endblock %}
